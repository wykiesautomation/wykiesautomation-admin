<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Admin — Wykies Automation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline';
                 script-src 'self'; base-uri 'none'; frame-ancestors 'none'; upgrade-insecure-requests">
  <link rel="stylesheet" href="./admin.css" />
</head>
<body>
  <div id="toasts" class="toasts" aria-live="polite" aria-atomic="true"></div>
  <aside class="sidenav">
    <div class="brand">Wykies Admin</div>
    <nav>
      <button class="active" data-tab="overview">Overview</button>
      <button data-tab="products">Products</button>
      <button data-tab="gallery">Gallery</button>
      <button data-tab="payments">Payments</button>
      <button data-tab="logs">Logs</button>
    </nav>
    <div style="margin-top:auto"></div>
    <div class="badge" id="roleBadge">Viewer</div>
    <button id="signOut" class="btn">Sign Out</button>
  </aside>

  <main class="main">
    <header class="topbar">
      <div>Admin Dashboard</div>
      <div class="mono">Build: <span id="buildId">admin-v1</span></div>
    </header>

    <!-- Overview Tab -->
    <section id="tab-overview" class="tab visible" aria-label="Overview">
      <div class="stats">
        <div class="tile"><div class="num" id="stat-products">0</div><div>Products</div></div>
        <div class="tile"><div class="num" id="stat-payments">0</div><div>Payments (today)</div></div>
        <div class="tile"><div class="num" id="stat-gallery">0</div><div>Gallery Images</div></div>
        <div class="tile"><div class="num" id="stat-errors">0</div><div>Errors (24h)</div></div>
      </div>
      <div class="grid">
        <div class="tile">
          <h3>Products (recent)</h3>
          <div id="ov-products" class="table"></div>
        </div>
        <div class="tile">
          <h3>Payments (today)</h3>
          <div id="ov-payments" class="table"></div>
          <button id="exp-pay" class="btn">Export CSV</button>
        </div>
        <div class="tile">
          <h3>Price Changes</h3>
          <div id="ov-price" class="table"></div>
          <button id="exp-price" class="btn">Export CSV</button>
        </div>
        <div class="tile">
          <h3>Gallery Preview</h3>
          <div id="ov-gallery"></div>
        </div>
      </div>
    </section>

    <!-- Products Tab -->
    <section id="tab-products" class="tab" aria-label="Products">
      <div class="toolbar">
        <button id="add-product" class="btn btn-primary">Add Product</button>
      </div>
      <div id="products-table" class="table"></div>
    </section>

    <!-- Gallery Tab -->
    <section id="tab-gallery" class="tab" aria-label="Gallery">
      <div class="toolbar">
        <label class="btn">Upload <input id="upload-file" type="file" accept="image/*" hidden></label>
        <button id="upload-img" class="btn">Save Image</button>
        <button id="save-order" class="btn">Save Order</button>
      </div>
      <div id="gallery-grid" class="grid reorderable"></div>
    </section>

    <!-- Payments Tab -->
    <section id="tab-payments" class="tab" aria-label="Payments">
      <div class="toolbar">
        <input id="pay-from" class="input" placeholder="From (YYYY-MM-DD)" />
        <input id="pay-to" class="input" placeholder="To (YYYY-MM-DD)" />
        <input id="pay-email" class="input" placeholder="Email" />
        <input id="pay-sku" class="input" placeholder="SKU" />
        <button id="pay-filter" class="btn">Filter</button>
        <button id="pay-export" class="btn">Export CSV</button>
      </div>
      <div id="payments-table" class="table"></div>
    </section>

    <!-- Logs Tab -->
    <section id="tab-logs" class="tab" aria-label="Logs">
      <div class="tabs">
        <button class="btn active" data-log="price">Price Changes</button>
        <button class="btn" data-log="system">System</button>
        <button class="btn" data-log="itn">ITN Errors</button>
      </div>
      <div class="toolbar">
        <button id="logs-export" class="btn">Export CSV</button>
      </div>
      <div id="logs-table" class="table"></div>
    </section>

    <div id="modal" class="modal hidden"></div>
    <footer id="statusbar" class="statusbar">Connecting to Google Sheets CMS…</footer>
  </main>

  <script src="./admin.js"></script>
</body>
</html>