
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Wykies Automation — Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- CSS (use one of these based on where your file is) -->
  <!-- If admin.css is inside assets/css/: -->
  <link rel="/admin.css
  <!-- If admin.css is in the same folder as this HTML, use: -->
  <!-- <link rel="stylesheet" href="./admin.css(for allowlisted sign-in) -->
  https://accounts.google.com/gsi/client</script>

  <!-- Config + Payments UI logic -->
  <script src="/config  <script src="/assets/js/paymentsApi</head>
<body>
  <!-- Topbar -->
  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <h1 class="brand">Wykies Automation — Admin</h1>
      <nav class="top-actions" aria-label="Global actions">
        <button class="btn outline" id="btn-view-docs">View Docs</button>
        <button class="btn outline" id="btn-download-trial">Download Trial</button>
        <a class="btn primary" id="btn-whatsapp" href="https://wa.me/27716816131" target="_blank" rel="noopenerain">
    <!-- Auth Gate -->
    <section class="auth-gate" id="auth-gate" aria-labelledby="auth-title">
      <div class="auth-inner">
        <h2 id="auth-title">Admin Sign‑In</h2>
        <p class="muted">Only the allowlisted Google account can access the Admin panel.</p>
        <div id="g_id_onload"
             data-client_id="YOUR_GOOGLE_CLIENT_ID"
             data-context="signin"
             data-auto_prompt="false"></div>
        <div class="g_id_signin"
             data-type="standard"
             data-shape="rectangular"
             data-theme="filled_blue"
             data-text="signin_with"
             data-size="large"
             data-logo_alignment="left"></div>
        <div class="auth-status" id="auth-status" hidden>
          <span class="badge success">Signed in</span>
          <button class="btn danger" id="btn-signout">Sign out</button>
        </div>
      </div>
    </section>

    <!-- Payments Panel -->
    <section class="tab-panel" aria-label="Payments">
      <div class="panel-header">
        <h2>Payments</h2>
        <div class="controls">
          <label for="paySort" class="sr-only">Sort by</label>
          <select id="paySort" aria-label="Sort payments">
            <option value="timestamp_desc">Newest first</option>
            <option value="timestamp_asc">Oldest first</option>
          </select>

          <button class="btn outline" id="btnExportCsv">Export CSV</button>
          <button class="btn outline" id="btnExportXlsx">Export XLSX</button>

          <!-- Optional date filters -->
          <input type="date" id="dateFrom" aria-label="From date" />
          <input type="date" id="dateTo" aria-label="To date" />

          <!-- Search -->
          <label for="paySearch" class="sr-only">Search</label>
          <input id="paySearch" type="search" placeholder="Search email, invoice, SKU…" />
        </div>
      </div>

      <div class="table-wrap">
        <table class="data-table" aria-describedby="payments-caption">
          <caption id="payments-caption" class="sr-only">List of PayFast payments</caption>
          <thead>
            <tr>
              <th scope="col">Timestamp</th>
              <th scope="col">Invoice</th>
              <th scope="col">Order ID</th>
              <th scope="col">pf_payment_id</th>
              <th scope="col">Email</th>
              <th scope="col">SKU</th>
              <th scope="col">Total (incl.)</th>
              <th scope="col">Released</th>
              <th scope="col">PDF</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody id="payRows"><!-- populated by paymentsApi.js --></tbody>
        </table>
      </div>

      <div class="pager" role="navigation" aria-label="Table pagination">
        <button class="btn outline" id="prevPage" disabled aria-label="Previous page">◀ Prev</button>
        <span id="pageInfo">Page 1</span>
        <button class="btn outline" id="nextPage" aria-label="Next page">Next ▶</button>
      </div>
    </section>
  </main>

  <!-- Toast -->
  <div class="toast hidden" id="toast" role="status" aria-live="polite">
    <span id="toast-text">Ready.</span>
    <button class="btn small link" id="toast-close" aria-label="Dismiss">✕</button>
  </div>
</body>
</html>
